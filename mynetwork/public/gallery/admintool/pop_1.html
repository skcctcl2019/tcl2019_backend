<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="../../lib/jui/css/ui.min.css"/>
<link id="ui_theme" rel="stylesheet" href="../../lib/jui/css/ui-jennifer.min.css"/>
<link rel="stylesheet" href="../../lib/jui/css/grid.min.css"/>
<link id="grid_theme" rel="stylesheet" href="../../lib/jui/css/grid-jennifer.min.css"/>
<script src="../../lib/jquery-1.8.0.min.js"></script>
<script src="../../lib/jui/js/core.min.js"></script>
<script src="../../lib/jui/js/ui.min.js"></script>
<script src="../../lib/jui/js/grid.min.js"></script>
<script src="../../lib/jui/js/chart.min.js"></script>
<link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
<link href="../../gallery/admintool/index.css" rel="stylesheet" type="text/css" />
<link id="index_theme" href="../../gallery/admintool/index-jennifer.css" rel="stylesheet" type="text/css" />




<script>
	var _ = jui.include("util.base");

	$(function() {

    $("#reg_button").on("click", function(err){
      //submit();
      // 실제 찾아보기 버튼을 통해 입력된 파일의 경로가, 바로 submit 으로 처리되는 것같으므로
      // 관련된 내용에 대해서 확인하고 수정할 것
    });
    //$("#reg_button").on("click", function(e) {
		//submit();
		//});
	});

  

	function move(index){
		alert(index);

	}
		
		/*
			var $box = $(this),
				$boxPop = $("#popupcontent"),
				index = $box.data("index");

			if($(e.target).hasClass("btn")) {
				$boxPop.css({
					width: $box.width(),
					height: $box.height(),
					left: $box.offset().left,
					top: $box.offset().top
				}).addClass("transition");

				var $iframe = $boxPop.find("iframe"),
					//url = "../gallery/admintool/pop_" + (index + 1) + ".html",
					url = "../gallery/admintool/edit_sample.html",
		
					isLoading = true;

				$iframe.attr("src", url);
				$iframe.on("load", function(e) {
					if(!isLoading) return;

					$boxPop.fadeIn(1000);
					$iframe.css("border-radius", "5px");

					setTimeout(function() {
						$boxPop.css({
							width: "100%",
							height: "100%",
							left: "0px",
							top: "0px"
						});

						setTimeout(function() {
							$boxPop.removeClass("transition");
							$iframe.css("border-radius", "0px");
							isLoading = false;

							if(_.browser.mozilla) {
								$iframe.attr("src", url);
							}
						}, 1000);
					}, 1000);
				});
			}
		});
		
		*/

</script>


</head>
<body class="jui">

<div class="header">
  <div class="logo">
    <i class="icon-menu"></i>
  </div>
  <div class="toolbar">
    <span>Theme</span>
    <span>
      <select onchange="changeTheme(this.value)">
        <option value="jennifer">Jennifer</option>
        <option value="dark">Dark</option>
      </select>
    </span>
    <span style="float:right" onclick="test()">
      Close <i class="icon-check"></i>
    </span>
  </div>
</div>
<script>
function test()
{
	parent.$('#popupcontent').hide();
}
</script>
<script>
window.onload = function() {
  window.parent.postMessage({ hello: 'parent' }, '*');
};
window.addEventListener('message', function(e) {
  console.log(e.data); // zerocho
});
</script>
<div class="container">
  <div class="menu">
    <div class="vmenu ">
      <a href="./pop_1.html"  class="active"><i class="icon-monitoring"></i> Dashboard</a>
      <a href="./pop_2.html" ><i class="icon-realtime"></i> Realtime</a>
      <a href="./pop_3.html" ><i class="icon-profile"></i> Analysis</a>
      <a><i class="icon-chart"></i> Statistics</a>
      <a><i class="icon-document"></i> Document</a>
      <a><i class="icon-gear"></i> Management</a>
      <a><i class="icon-user"></i> User</a>
    </div>
  </div>
  <div class="content">
    <div class="content-list">
      <div class="dashboard-first">
        <div class="col col-3">
          <div class="card">
            <div class="title">Today's visitors</div>
            <div class="value">3,352</div>
          </div>
        </div>
        <div class="col col-3">
          <div class="card">
            <div class="title">Time of operation of call</div>
            <div class="value">2,364,806</div>
          </div>
        </div>
        <div class="col col-3">
          <div class="card">
            <div class="title">Time of operation Number of EVENT</div>
            <div class="value">15,610</div>
          </div>
        </div>
        <div class="col col-3">
          <div class="card">
            <div class="title">Peak Time</div>
            <div class="value">10:00 ~ 11:00</div>
          </div>
        </div>
      </div>
      
	  <div class="panel">
        <div class="body">
          <h2 class="title" align='center' style="margin-left:0px; font-size:35px;margin-bottom:0px; color:#814fd5">정보 사전등록</h2>
        </div>
      </div>
     
	 <div class="panel dashed">
        <div class="body">
          	<tr>
				<td>
					<h2 class="title">아동 등 사진</h2>
				</td>         
				    <td>
              <form name="apndFileForm" target="bIfrm" method="post" action="/registerInfo" enctype="multipart/form-data">
                <input name="userFile" type="file" id="ATT" size="30" style="font-size:15px" /><br><br>
              </form>
              <form name="apndFileForm" target="bIfrm"  method="post" action="/registerInfo" enctype="multipart/form-data">
                <input name="userFile" type="file" id="ATT2" size="30" style="font-size:15px" /><br><br>
              </form>
              <form name="apndFileForm" target="bIfrm"  method="post" action="/registerInfo" enctype="multipart/form-data">
                <input name="userFile" type="file" id="ATT3" size="30" style="font-size:15px" /><br><br>
              </form>
            </td>
            <td>
              <img src="@sample.gif" width="230px" id="img" name="img" />
            </td>
          </tr>
          <tr>
            <td>
              <h2 class="title">연락처</h2>
            </td>
            <td>
              <input type="number" class="input" />
            </td>
          </tr>
          <tr>
            <td>
              <h2 class="title">특이사항</h2>
            </td>
            <td>
              <textarea class="input" style="height: 150px; width: 550px;">남들과 구분되는 신체적 특징이나 버릇 등 특이사항은 반드시 입력해주세요.</textarea>
            </td>
          </tr>
          <br><br>
          <button class="btn large focus" id="reg_button" type="submit">등록</button>
          </form>
		  
        </div>
		
      </div>
	  
    </div>



</div>
<iframe width="0%" height="0%" name="bIfrm" id="bIfrm" src="" hidden="true"></iframe>
<script>
  function changeTheme(theme) {
    $("#ui_theme").attr("href", "../../lib/jui/css/ui-" + theme + ".min.css");
    $("#grid_theme").attr("href", "../../lib/jui/css/grid-" + theme + ".min.css");
    $("#index_theme").attr("href", "../../gallery/admintool/index-" + theme + ".css");

    for(var i = 0, len = chart_list.length; i < len; i++) {

      if (chart_list[i].setTheme) {
        chart_list[i].setTheme(theme);
      } else {
        chart_list[i].chart.setTheme(theme);
      }
    }
  }

    $(document).ready(function () {
        var opt = {
            img: $('#img')
        };
        $('#ATT').setPreview(opt, 0);
        $('#ATT2').setPreview(opt, 1);
        $('#ATT3').setPreview(opt, 2);
    });

    $.fn.setPreview = function (opt, index) {
        var defaultOpt = {
            inputFile: $(this),
            img: null
        };

        $.extend(defaultOpt, opt);

        var previewImage = function () {
            if (!defaultOpt.inputFile || !defaultOpt.img) return;
            var inputFile = defaultOpt.inputFile.get(0);
            var img = defaultOpt.img.get(0);

            // FileReader
            if (window.FileReader) {
                // image 
                if (!inputFile.files[0].type.match(/image\//)) return;

                // preview
                try {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        img.src = e.target.result;
                        img.style.width = defaultOpt.w + 'px';
                        img.style.height = defaultOpt.h + 'px';
                        img.style.display = '';
                    }
                    reader.readAsDataURL(inputFile.files[0]);
                } catch (e) {
                    // exception...
                }
                // img.filters (MSIE)
            } else if (img.filters) {
                inputFile.select();
                inputFile.blur();
                var imgSrc = document.selection.createRange().text;
                img.src = imgSrc;
                img.style.display = '';
                // no support
            } else {
                // Safari5, ...
            }
        };

        // onchange
        $(this).change(function () {
            previewImage();
            fileSizeCheck(this, index);
        });
    };

    function fileSizeCheck(obj, index) {
        var path = obj.value;
        var maxSize = 10 * 1024 * 1024;	
        var path = path.toLowerCase();

        if (!(/(\.jpg|\.jpeg|\.gif|\.png|\.bmp|\.png)$/i.test(path))) {
            alert("지원하지 않는 확장자 입니다.");
            return false;
        }

        var img = new Image();
        var filesize = img.fileSize;
        if (maxSize < filesize) {
            alert("첨부파일의 사이즈가 너무 큽니다.");
            return false;
        }
        document.apndFileForm[index].submit();
    }

</script>
</body>
</html>
